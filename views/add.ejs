<%- include('partials/header.ejs'); -%>

<body>
    
    <%- include('partials/navbar.ejs'); -%>

    <section id="herosection">
        <div class="px-4 py-1 my-4 text-center">
            <h1 class="display-5 fw-bold ">Bookworm Bliss</h1>
            <div class="col-lg-6 mx-auto">
                <h1 class="lead my-4">Add Book</h1>
            </div>
        </div>
    </section>

        <div class="container my-5" id="bookForm">
            <div class="row justify-content-center ms-5 py-4">
                <% if(locals.book) {%>
                    <div class="col-lg-10">
                            <form action="/add" method="post">
                                <div class="row">
                                    <div class="col-md-8 order-md-2">
                                        <div class = "row g-3">
                                            <div class="col-md-12">
                                                <label for="your-name" class="form-label">Book Title</label>
                                                <input type="text" class="form-control" id="your-name" name="title" value="<%= book.title %>" readonly>
                                            </div>
                                            <input type="hidden" name="author" value="<%= book.author %>">
                                            <input type="hidden" name="isbn" value="<%= book.isbn %>">
                                            <input type="hidden" name="yearPublish" value="<%= book.yearPublish %>">
                                            <div class="col-md-12">
                                                <label for="your-surname" class="form-label">Make a review</label>
                                                <textarea class="form-control" id="myTextarea" name="review" rows="5" required=""></textarea>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="your-subject" class="form-label rateLabel">Your Rating </label>
                                                <div class="rating-wrap">
                                                    <div class="center stars">
                                                        <fieldset class="rating">
                                                            <input type="radio" id="star5" name="rating" value="5"/><label for="star5" class="full" title="Awesome"></label>
                                                            <input type="radio" id="star4" name="rating" value="4"/><label for="star4" class="full"></label>
                                                            <input type="radio" id="star3" name="rating" value="3"/><label for="star3" class="full"></label>
                                                            <input type="radio" id="star2" name="rating" value="2"/><label for="star2" class="full"></label>
                                                            <input type="radio" id="star1" name="rating" value="1"/><label for="star1" class="full"></label>
                                                        </fieldset>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-12" >                                 
                                                <button type="submit" class="btn btn-primary fw-bold addButton">Send</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 order-md-1">
                                        <img src ="https://covers.openlibrary.org/b/isbn/<%= book.isbn%>-L.jpg?default=false" id="bookImage" width="260" height="350" onerror="this.src='images/avatar_book-sm.png'">
                                    </div>
                                </div>
                            </form>        
                    </div>
                <% }%>
            </div>
        </div>
        <br>

        <%- include('partials/footer.ejs'); -%>

        <script>

            // Get the textarea element
            const textarea = document.getElementById('myTextarea');

            // Listen for input events (like typing)
            textarea.addEventListener('input', function() {
            // Set the height of the textarea based on its scroll height
            this.style.height = 'auto';
            this.style.height = this.scrollHeight + 'px';
            });

        </script>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
        
</body></html>